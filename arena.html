<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Home - Kane vs Abel Arena</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Home";
        var mkdocs_page_input_path = "arena.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Kane vs Abel Arena
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Home</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#system-architecture">System Architecture</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#agent-types">Agent Types</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#command-line-interface">Command Line Interface</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#common-options">Common Options</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#agent-configuration">Agent Configuration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#arena-configuration">Arena Configuration</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#elo-rating-system">ELO Rating System</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#behavior-trees">Behavior Trees</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#example-bt-structure">Example BT Structure</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#human-vs-double-dqn">Human vs. Double DQN</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#dueling-dqn-vs-double-dqn">Dueling DQN vs. Double DQN</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#bt-vs-bt-with-custom-trees">BT vs. BT with Custom Trees</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#switching-player-positions">Switching Player Positions</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#controls">Controls</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#player-1-controls">Player 1 Controls</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#player-2-controls">Player 2 Controls</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Environment</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="action_space.html">Action Space</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="adding_diff_game.html">Additional Games</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agents</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="behaviour_tree.html">Behaviour Tree</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="human_input.html">Human Input</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="dqn.html">DQN</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">RL Training</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="model_training.html">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="curriculum_learning.html">Curriculum Learning</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="model_evaluation.html">Model Evaluation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="model_finetuning.html">Fine-tuning Models</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Kane vs Abel Arena</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Home</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="kane-vs-abel-mortal-kombat-ii-arena">Kane vs Abel Mortal Kombat II Arena</h1>
<h2 id="overview">Overview</h2>
<p>The Mortal Kombat II Arena is a framework for training, evaluating, and comparing different AI agents in the Mortal Kombat II environment. It supports various agent types including human players, DQN-based reinforcement learning agents, and behavior tree agents.</p>
<h2 id="system-architecture">System Architecture</h2>
<p>The arena implements a Model-View-Controller (MVC) architecture:</p>
<ol>
<li><strong>Model (<code>EnvModel</code>)</strong>: Manages the game environment state and interactions</li>
<li><strong>View (<code>Renderer</code>)</strong>: Handles visualization of the game state</li>
<li><strong>Controller (<code>MortalKombatArena</code>)</strong>: Coordinates inputs, agent actions, and game updates</li>
<li><strong>Input Handler (<code>InputHandler</code>)</strong>: Processes keyboard inputs for human players</li>
</ol>
<h2 id="agent-types">Agent Types</h2>
<p>The arena supports the following agent types:</p>
<ul>
<li><strong>Human</strong>: Controlled via keyboard inputs</li>
<li><strong>DQN</strong>: Deep Q-Network reinforcement learning agent</li>
<li><strong>Double DQN</strong>: Double Deep Q-Network for more stable learning</li>
<li><strong>Dueling DDQN</strong>: Dueling architecture with Double DQN for better value estimation</li>
<li><strong>BT</strong>: Behavior Tree-based agents that use predefined decision trees</li>
</ul>
<h2 id="command-line-interface">Command Line Interface</h2>
<p>Run the arena using the following command structure:</p>
<pre><code class="language-bash">python arena.py [options]
</code></pre>
<h3 id="common-options">Common Options</h3>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--p1-type {human,dqn,double_dqn,dueling_ddqn,bt}</code></td>
<td>Agent type for Player 1</td>
</tr>
<tr>
<td><code>--p1-model PATH</code></td>
<td>Path to the model file for Player 1 (for RL agents)</td>
</tr>
<tr>
<td><code>--p1-bt-file PATH</code></td>
<td>Path to behavior tree YAML file for Player 1 (for BT agents)</td>
</tr>
<tr>
<td><code>--p1-username NAME</code></td>
<td>Username for Player 1 (for human players)</td>
</tr>
<tr>
<td><code>--p2-type {human,dqn,double_dqn,dueling_ddqn,bt}</code></td>
<td>Agent type for Player 2</td>
</tr>
<tr>
<td><code>--p2-model PATH</code></td>
<td>Path to the model file for Player 2 (for RL agents)</td>
</tr>
<tr>
<td><code>--p2-bt-file PATH</code></td>
<td>Path to behavior tree YAML file for Player 2 (for BT agents)</td>
</tr>
<tr>
<td><code>--p2-username NAME</code></td>
<td>Username for Player 2 (for human players)</td>
</tr>
<tr>
<td><code>--window-size WIDTH HEIGHT</code></td>
<td>Window dimensions (default: 640 480)</td>
</tr>
<tr>
<td><code>--fps FPS</code></td>
<td>Target frames per second (default: 60)</td>
</tr>
<tr>
<td><code>--switch</code></td>
<td>Swap Player 1 and Player 2 positions</td>
</tr>
</tbody>
</table>
<h2 id="configuration">Configuration</h2>
<h3 id="agent-configuration">Agent Configuration</h3>
<p>Each agent is configured through an <code>AgentConfig</code> object with these properties:
- <code>agent_type</code>: The type of agent ("human", "dqn", "double_dqn", "dueling_ddqn", "bt")
- <code>model_path</code>: Path to the model file (for RL agents)
- <code>bt_file_path</code>: Path to the behavior tree file (for BT agents)
- <code>player_num</code>: Player number (1 or 2)</p>
<h3 id="arena-configuration">Arena Configuration</h3>
<p>The arena is configured through an <code>ArenaConfig</code> object with these properties:
- <code>game</code>: Game name ("MortalKombatII-Genesis")
- <code>state</code>: Initial game state ("Level1.LiuKangVsJax.2P")
- <code>players</code>: Number of players (2)
- <code>window_size</code>: Window dimensions for rendering
- <code>fps</code>: Target frames per second
- <code>p1_agent</code>: Agent configuration for Player 1
- <code>p2_agent</code>: Agent configuration for Player 2</p>
<h2 id="elo-rating-system">ELO Rating System</h2>
<p>The arena includes an ELO rating system to track and compare agent performance:</p>
<ul>
<li>Each agent type has its own rating tracked in <code>elo_ratings.json</code></li>
<li>Ratings are updated after each match based on game outcome</li>
<li>Default starting rating is 1500</li>
<li>Human players are tracked by their usernames</li>
<li>AI agents are tracked by their uppercase agent types</li>
</ul>
<h2 id="behavior-trees">Behavior Trees</h2>
<p>BT agents use YAML files to define their decision trees:</p>
<ol>
<li>Each BT file defines a tree of nodes (Selectors, Sequences, Conditions, Actions)</li>
<li>Conditions map to functions in the <code>ConditionsProvider</code> class</li>
<li>Actions map to game inputs defined in <code>env_config.yaml</code></li>
</ol>
<h3 id="example-bt-structure">Example BT Structure</h3>
<pre><code class="language-yaml">node:
  type: Selector
  name: &quot;Root&quot;
  children:
    - type: Sequence
      name: &quot;Attack Sequence&quot;
      children:
        - type: Condition
          name: &quot;Is Close&quot;
          properties:
            condition: &quot;is_close_to_enemy&quot;
        - type: Action
          name: &quot;Attack&quot;
          properties:
            action_id: &quot;A&quot;
            frames_needed: 5
</code></pre>
<h2 id="examples">Examples</h2>
<h3 id="human-vs-double-dqn">Human vs. Double DQN</h3>
<pre><code class="language-bash">python arena.py \
    --p1-type human \
    --p2-type double_dqn \
    --p2-model &quot;models/kane/DDQN_4M_with_lrSchedule_frameskip_24_actions.zip&quot;
</code></pre>
<h3 id="dueling-dqn-vs-double-dqn">Dueling DQN vs. Double DQN</h3>
<pre><code class="language-bash">python arena.py \
    --p1-type dueling_ddqn \
    --p1-model &quot;models/DuelingDQN_without_curriculum_4M_VeryEasyVsJax&quot; \
    --p2-type double_dqn \
    --p2-model &quot;models/DoubleDQN_without_curriculum_4M_VeryEasyVsJax_Exp_A&quot;
</code></pre>
<h3 id="bt-vs-bt-with-custom-trees">BT vs. BT with Custom Trees</h3>
<pre><code class="language-bash">python arena.py \
    --p1-type bt \
    --p1-bt-file &quot;bt_files/aggressive.yaml&quot; \
    --p2-type bt \
    --p2-bt-file &quot;bt_files/defensive.yaml&quot;
</code></pre>
<h3 id="switching-player-positions">Switching Player Positions</h3>
<pre><code class="language-bash">python arena.py \
    --p1-type human \
    --p2-type double_dqn \
    --p2-model &quot;models/kane/model.zip&quot; \
    --switch
</code></pre>
<h2 id="controls">Controls</h2>
<h3 id="player-1-controls">Player 1 Controls</h3>
<ul>
<li><strong>Arrow Keys</strong>: Movement</li>
<li><strong>Z</strong>: A button</li>
<li><strong>X</strong>: B button</li>
<li><strong>C</strong>: C button</li>
<li><strong>Enter</strong>: Start button</li>
</ul>
<h3 id="player-2-controls">Player 2 Controls</h3>
<ul>
<li><strong>W, A, S, D</strong>: Movement</li>
<li><strong>T</strong>: A button</li>
<li><strong>Y</strong>: B button</li>
<li><strong>U</strong>: C button</li>
<li><strong>Enter</strong>: Start button</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="action_space.html" class="btn btn-neutral float-right" title="Action Space">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="action_space.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
